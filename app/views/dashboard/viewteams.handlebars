{{#if message}}
<div class="alert alert-success">
	<strong>{{message}}</strong>
</div>
{{/if}}
<div class="col-lg-12" ng-controller="teams">
<h2>Your Teams</h2>
<div class="table-responsive">
    <table class="table table-bordered table-hover">
        <thead>
            <tr>
                <th>Team Name</th>
                <th>First Team Member Name</th>
                <th>Email</th>
                <th>Contact</th>
                <th>Second Team Member Name</th>
                <th>Email</th>
                <th>Contact</th>
                <th>Third Team Member Name</th>
                <th>Email</th>
                <th>Contact</th>
                <th>Payment Status</th>
                <th></th>
            </tr>
        </thead>
        <tbody id='tbody'>
            <tr ng-repeat="x in teamData">
            <td> [[ x.name ]] </td>
            <td> [[ x.firstStudent.name ]] </td>
            <td> [[ x.firstStudent.email ]] </td>
            <td> [[ x.firstStudent.contact ]] </td>
            <td> [[ x.secondStudent.name ]] </td>
            <td> [[ x.secondStudent.email ]] </td>
            <td> [[ x.secondStudent.contact ]] </td>
            <td> [[ x.thirdStudent.name ]] </td>
            <td> [[ x.thirdStudent.email ]] </td>
            <td> [[ x.thirdStudent.contact ]] </td>
            <td> [[ x.isPaid ]] </td>
            <td> <button ng-click="edit([[x._id]])">Edit</button> </td>
            </tr>
        </tbody>
    </table>
</div>
</div>

<script>
app.controller("teams", function($scope) {
    $.get("/getteams",function(data){
        for(i=0; i<data.length; i++) {
            if(data[i]["isPaid"] == 2)
                data[i]["isPaid"] = "Paid";
            else if(data[i]["isPaid"] == 1)
                data[i]["isPaid"] = "Payment in process";
            else
                data[i]["isPaid"] = "Not Paid";

        }
        $scope.teamData  = data;
        $scope.$apply();
    });

    $scope.edit = function(id) {
    	location.assign('/editteam/id='+id);
    }
});
</script>